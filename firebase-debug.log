[debug] [2023-11-01T18:46:20.144Z] ----------------------------------------------------------------------
[debug] [2023-11-01T18:46:20.147Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T18:46:20.147Z] CLI Version:   12.8.0
[debug] [2023-11-01T18:46:20.147Z] Platform:      darwin
[debug] [2023-11-01T18:46:20.148Z] Node Version:  v20.9.0
[debug] [2023-11-01T18:46:20.148Z] Time:          Wed Nov 01 2023 14:46:20 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T18:46:20.148Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T18:46:20.203Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T18:46:20.204Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T18:46:20.205Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T18:46:20.206Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T18:46:20.207Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:46:20.207Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T18:46:20.385Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T18:46:20.386Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T18:46:20.386Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T18:46:20.387Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T18:46:20.551Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T18:46:20.551Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T18:46:20.554Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T18:46:20.927Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T18:46:20.927Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_e36d97d7-e3d4-49d7-abc7-ec1ab2e8e267"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T18:46:20.929Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T18:46:20.929Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:46:20.930Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T18:46:20.930Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:46:20.931Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T18:46:20.932Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:46:20.933Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T18:46:20.933Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:46:21.352Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T18:46:21.353Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T18:46:21.353Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T18:46:21.353Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T18:46:21.355Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T18:46:21.355Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T18:46:21.356Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T18:46:21.356Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T18:46:21.356Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T18:46:21.655Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T18:46:21.656Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T18:46:21.656Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T18:46:21.804Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T18:46:21.805Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T18:46:21.806Z] Validating nodejs source
[debug] [2023-11-01T18:46:22.559Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "function.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[debug] [2023-11-01T18:46:22.559Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-11-01T18:46:22.560Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-11-01T18:46:22.567Z] Found firebase-functions binary at '/Users/tay/Desktop/code/llk/node_modules/.bin/firebase-functions'
[info] Serving at port 8471

[debug] [2023-11-01T18:46:22.834Z] Got response code 400; body Failed to generate manifest from function source: TypeError: next is not a function
[info] shutdown requested via /__/quitquitquit

[error] 
[error] Error: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error
[debug] [2023-11-01T18:49:24.507Z] ----------------------------------------------------------------------
[debug] [2023-11-01T18:49:24.509Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T18:49:24.510Z] CLI Version:   12.8.0
[debug] [2023-11-01T18:49:24.510Z] Platform:      darwin
[debug] [2023-11-01T18:49:24.510Z] Node Version:  v20.9.0
[debug] [2023-11-01T18:49:24.510Z] Time:          Wed Nov 01 2023 14:49:24 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T18:49:24.510Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T18:49:24.565Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T18:49:24.566Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T18:49:24.566Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T18:49:24.568Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T18:49:24.568Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:49:24.568Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T18:49:24.736Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T18:49:24.737Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T18:49:24.737Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T18:49:24.738Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T18:49:24.900Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T18:49:24.901Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T18:49:24.903Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T18:49:25.340Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T18:49:25.340Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_e36d97d7-e3d4-49d7-abc7-ec1ab2e8e267"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T18:49:25.342Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T18:49:25.342Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:49:25.343Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T18:49:25.344Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:49:25.345Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T18:49:25.345Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:49:25.346Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T18:49:25.346Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:49:25.685Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T18:49:25.685Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T18:49:25.709Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T18:49:25.709Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T18:49:25.709Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T18:49:25.710Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T18:49:25.731Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T18:49:25.732Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T18:49:25.732Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T18:49:25.937Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T18:49:25.937Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T18:49:25.938Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T18:49:26.100Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T18:49:26.100Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T18:49:26.102Z] Validating nodejs source
[debug] [2023-11-01T18:49:26.647Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "function.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[debug] [2023-11-01T18:49:26.647Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-11-01T18:49:26.648Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-11-01T18:49:26.657Z] Found firebase-functions binary at '/Users/tay/Desktop/code/llk/node_modules/.bin/firebase-functions'
[info] Serving at port 8856

[debug] [2023-11-01T18:49:26.799Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Cannot use import statement outside a module
[info] shutdown requested via /__/quitquitquit

[error] 
[error] Error: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error
[debug] [2023-11-01T18:50:17.786Z] ----------------------------------------------------------------------
[debug] [2023-11-01T18:50:17.789Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T18:50:17.789Z] CLI Version:   12.8.0
[debug] [2023-11-01T18:50:17.789Z] Platform:      darwin
[debug] [2023-11-01T18:50:17.789Z] Node Version:  v20.9.0
[debug] [2023-11-01T18:50:17.790Z] Time:          Wed Nov 01 2023 14:50:17 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T18:50:17.790Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T18:50:17.837Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T18:50:17.838Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T18:50:17.838Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T18:50:17.840Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T18:50:17.840Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:50:17.841Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T18:50:18.018Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T18:50:18.019Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T18:50:18.019Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T18:50:18.020Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T18:50:18.217Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T18:50:18.218Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T18:50:18.221Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T18:50:18.465Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T18:50:18.465Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_e36d97d7-e3d4-49d7-abc7-ec1ab2e8e267"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T18:50:18.467Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T18:50:18.467Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:50:18.469Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T18:50:18.469Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:50:18.470Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T18:50:18.470Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:50:18.471Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T18:50:18.471Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T18:50:18.778Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T18:50:18.778Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T18:50:18.816Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T18:50:18.816Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T18:50:18.817Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T18:50:18.817Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T18:50:18.861Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T18:50:18.862Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T18:50:18.862Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T18:50:19.064Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T18:50:19.064Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T18:50:19.065Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T18:50:19.260Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T18:50:19.260Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T18:50:19.262Z] Validating nodejs source
[debug] [2023-11-01T18:50:19.824Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "function.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[debug] [2023-11-01T18:50:19.824Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-11-01T18:50:19.825Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-11-01T18:50:19.834Z] Found firebase-functions binary at '/Users/tay/Desktop/code/llk/node_modules/.bin/firebase-functions'
[info] Serving at port 8735

[debug] [2023-11-01T18:50:21.117Z] Got response code 400; body Failed to generate manifest from function source: TypeError: next is not a function
[info] shutdown requested via /__/quitquitquit

[error] 
[error] Error: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error
[debug] [2023-11-01T19:04:30.257Z] ----------------------------------------------------------------------
[debug] [2023-11-01T19:04:30.259Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T19:04:30.260Z] CLI Version:   12.8.0
[debug] [2023-11-01T19:04:30.260Z] Platform:      darwin
[debug] [2023-11-01T19:04:30.260Z] Node Version:  v20.9.0
[debug] [2023-11-01T19:04:30.260Z] Time:          Wed Nov 01 2023 15:04:30 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T19:04:30.260Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T19:04:30.315Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T19:04:30.315Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T19:04:30.316Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T19:04:30.317Z] > refreshing access token with scopes: []
[debug] [2023-11-01T19:04:30.319Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-11-01T19:04:30.319Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-11-01T19:04:30.541Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-11-01T19:04:30.541Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-11-01T19:04:30.590Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T19:04:30.591Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:04:30.591Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:04:30.731Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T19:04:30.731Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:04:30.732Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T19:04:30.732Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T19:04:30.947Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T19:04:30.948Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T19:04:30.951Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T19:04:31.357Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T19:04:31.357Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_c711d2c8-76e6-4596-b126-339394344f2b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T19:04:31.359Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T19:04:31.359Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:04:31.360Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T19:04:31.360Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:04:31.361Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T19:04:31.361Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:04:31.362Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T19:04:31.363Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:04:31.733Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T19:04:31.733Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T19:04:31.734Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T19:04:31.734Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T19:04:31.747Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T19:04:31.747Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T19:04:31.756Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T19:04:31.756Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T19:04:31.757Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T19:04:32.060Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T19:04:32.060Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T19:04:32.061Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T19:04:32.668Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T19:04:32.668Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T19:04:32.669Z] Validating nodejs source
[debug] [2023-11-01T19:04:33.226Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "function.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[debug] [2023-11-01T19:04:33.226Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-11-01T19:04:33.227Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-11-01T19:04:33.235Z] Found firebase-functions binary at '/Users/tay/Desktop/code/llk/node_modules/.bin/firebase-functions'
[info] Serving at port 8074

[debug] [2023-11-01T19:04:33.507Z] Got response code 400; body Failed to generate manifest from function source: TypeError: next is not a function
[info] shutdown requested via /__/quitquitquit

[error] 
[error] Error: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error
[debug] [2023-11-01T19:08:19.797Z] ----------------------------------------------------------------------
[debug] [2023-11-01T19:08:19.799Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T19:08:19.799Z] CLI Version:   12.8.0
[debug] [2023-11-01T19:08:19.800Z] Platform:      darwin
[debug] [2023-11-01T19:08:19.800Z] Node Version:  v20.9.0
[debug] [2023-11-01T19:08:19.800Z] Time:          Wed Nov 01 2023 15:08:19 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T19:08:19.800Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T19:08:19.848Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T19:08:19.848Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T19:08:19.849Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T19:08:19.851Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T19:08:19.851Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:08:19.851Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:08:20.030Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T19:08:20.031Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:08:20.032Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T19:08:20.032Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T19:08:20.194Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T19:08:20.195Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T19:08:20.198Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T19:08:20.427Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T19:08:20.428Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_c711d2c8-76e6-4596-b126-339394344f2b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T19:08:20.429Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T19:08:20.430Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:08:20.431Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T19:08:20.431Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:08:20.432Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T19:08:20.432Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:08:20.433Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T19:08:20.434Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:08:20.843Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T19:08:20.843Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T19:08:20.844Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T19:08:20.844Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T19:08:20.845Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T19:08:20.845Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T19:08:20.846Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T19:08:20.846Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T19:08:20.847Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T19:08:21.172Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T19:08:21.173Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T19:08:21.173Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T19:08:21.455Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T19:08:21.455Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T19:08:21.457Z] Validating nodejs source
[debug] [2023-11-01T19:08:21.994Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[error] 
[error] Error: There was an error reading /package.json:

 index.js does not exist, can't deploy Cloud Functions
[debug] [2023-11-01T19:10:43.104Z] ----------------------------------------------------------------------
[debug] [2023-11-01T19:10:43.106Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T19:10:43.106Z] CLI Version:   12.8.0
[debug] [2023-11-01T19:10:43.106Z] Platform:      darwin
[debug] [2023-11-01T19:10:43.107Z] Node Version:  v20.9.0
[debug] [2023-11-01T19:10:43.107Z] Time:          Wed Nov 01 2023 15:10:43 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T19:10:43.107Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T19:10:43.154Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T19:10:43.155Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T19:10:43.155Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T19:10:43.158Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T19:10:43.158Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:10:43.158Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:10:43.316Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T19:10:43.316Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:10:43.317Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T19:10:43.317Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T19:10:43.491Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T19:10:43.492Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T19:10:43.495Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T19:10:43.810Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T19:10:43.810Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_c711d2c8-76e6-4596-b126-339394344f2b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T19:10:43.812Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T19:10:43.812Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:10:43.814Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T19:10:43.814Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:10:43.815Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T19:10:43.815Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:10:43.816Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T19:10:43.817Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:10:44.221Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T19:10:44.221Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T19:10:44.222Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T19:10:44.222Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T19:10:44.223Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T19:10:44.223Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T19:10:44.224Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T19:10:44.225Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T19:10:44.225Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T19:10:44.471Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T19:10:44.471Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T19:10:44.471Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T19:10:45.043Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T19:10:45.043Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T19:10:45.044Z] Validating nodejs source
[debug] [2023-11-01T19:10:45.567Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "lib/functions/src/index.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[error] 
[error] Error: There was an error reading /package.json:

 lib/functions/src/index.js does not exist, can't deploy Cloud Functions
[debug] [2023-11-01T19:15:58.418Z] ----------------------------------------------------------------------
[debug] [2023-11-01T19:15:58.420Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T19:15:58.421Z] CLI Version:   12.8.0
[debug] [2023-11-01T19:15:58.421Z] Platform:      darwin
[debug] [2023-11-01T19:15:58.421Z] Node Version:  v20.9.0
[debug] [2023-11-01T19:15:58.421Z] Time:          Wed Nov 01 2023 15:15:58 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T19:15:58.421Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T19:15:58.469Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T19:15:58.470Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T19:15:58.470Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T19:15:58.472Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T19:15:58.473Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:15:58.473Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:15:58.700Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T19:15:58.700Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:15:58.701Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T19:15:58.701Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T19:15:58.902Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T19:15:58.903Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T19:15:58.906Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T19:15:59.194Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T19:15:59.195Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_c711d2c8-76e6-4596-b126-339394344f2b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T19:15:59.197Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T19:15:59.197Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:15:59.198Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T19:15:59.199Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:15:59.200Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T19:15:59.200Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:15:59.201Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T19:15:59.201Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:15:59.711Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T19:15:59.711Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T19:15:59.713Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T19:15:59.713Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T19:15:59.714Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T19:15:59.714Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T19:15:59.715Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T19:15:59.715Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T19:15:59.716Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T19:16:00.004Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T19:16:00.004Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T19:16:00.005Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T19:16:00.268Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T19:16:00.269Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T19:16:00.270Z] Validating nodejs source
[debug] [2023-11-01T19:16:01.185Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "lib/functions/src/index.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[error] 
[error] Error: There was an error reading /package.json:

 lib/functions/src/index.js does not exist, can't deploy Cloud Functions
[debug] [2023-11-01T19:16:19.123Z] ----------------------------------------------------------------------
[debug] [2023-11-01T19:16:19.125Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T19:16:19.125Z] CLI Version:   12.8.0
[debug] [2023-11-01T19:16:19.125Z] Platform:      darwin
[debug] [2023-11-01T19:16:19.126Z] Node Version:  v20.9.0
[debug] [2023-11-01T19:16:19.126Z] Time:          Wed Nov 01 2023 15:16:19 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T19:16:19.126Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T19:16:19.174Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T19:16:19.175Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T19:16:19.175Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T19:16:19.178Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T19:16:19.178Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:16:19.178Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:16:19.435Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T19:16:19.436Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:16:19.436Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T19:16:19.436Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T19:16:19.623Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T19:16:19.623Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T19:16:19.626Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T19:16:19.987Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T19:16:19.987Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_c711d2c8-76e6-4596-b126-339394344f2b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T19:16:19.989Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T19:16:19.989Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:16:19.991Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T19:16:19.991Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:16:19.992Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T19:16:19.992Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:16:19.993Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T19:16:19.994Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:16:20.498Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T19:16:20.499Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T19:16:20.500Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T19:16:20.500Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T19:16:20.501Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T19:16:20.501Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T19:16:20.502Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T19:16:20.502Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T19:16:20.503Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T19:16:20.700Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T19:16:20.700Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T19:16:20.701Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T19:16:20.912Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T19:16:20.913Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T19:16:20.914Z] Validating nodejs source
[debug] [2023-11-01T19:16:21.521Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "function.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[debug] [2023-11-01T19:16:21.521Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-11-01T19:16:21.522Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-11-01T19:16:21.531Z] Found firebase-functions binary at '/Users/tay/Desktop/code/llk/node_modules/.bin/firebase-functions'
[info] Serving at port 8039

[debug] [2023-11-01T19:16:21.804Z] Got response code 400; body Failed to generate manifest from function source: TypeError: next is not a function
[info] shutdown requested via /__/quitquitquit

[error] 
[error] Error: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error
[debug] [2023-11-01T19:21:13.083Z] ----------------------------------------------------------------------
[debug] [2023-11-01T19:21:13.085Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2023-11-01T19:21:13.086Z] CLI Version:   12.8.0
[debug] [2023-11-01T19:21:13.086Z] Platform:      darwin
[debug] [2023-11-01T19:21:13.086Z] Node Version:  v20.9.0
[debug] [2023-11-01T19:21:13.086Z] Time:          Wed Nov 01 2023 15:21:13 GMT-0400 (Eastern Daylight Time)
[debug] [2023-11-01T19:21:13.086Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-01T19:21:13.144Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-01T19:21:13.145Z] > authorizing via signed-in user (lovelacekendama@gmail.com)
[debug] [2023-11-01T19:21:13.145Z] [iam] checking project lovelace-kendama-full-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-01T19:21:13.147Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions [none]
[debug] [2023-11-01T19:21:13.147Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:21:13.148Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:21:13.412Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions 200
[debug] [2023-11-01T19:21:13.413Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lovelace-kendama-full-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-01T19:21:13.413Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-01T19:21:13.413Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-01T19:21:13.659Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-01T19:21:13.659Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lovelace-kendama-full-app/serviceAccounts/lovelace-kendama-full-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lovelace-kendama-full-app'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-01T19:21:13.663Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app [none]
[debug] [2023-11-01T19:21:13.960Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app 200
[debug] [2023-11-01T19:21:13.960Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app {"projectId":"lovelace-kendama-full-app","projectNumber":"257896298898","displayName":"Lovelace Kendama Full App","name":"projects/lovelace-kendama-full-app","resources":{"hostingSite":"lovelace-kendama-full-app"},"state":"ACTIVE","etag":"1_c711d2c8-76e6-4596-b126-339394344f2b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-01T19:21:13.962Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-01T19:21:13.962Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:21:13.964Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-01T19:21:13.964Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:21:13.965Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-01T19:21:13.965Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:21:13.966Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-01T19:21:13.966Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lovelace-kendama-full-app
[debug] [2023-11-01T19:21:14.382Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com 200
[debug] [2023-11-01T19:21:14.382Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-01T19:21:14.383Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-01T19:21:14.383Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-01T19:21:14.384Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-01T19:21:14.384Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-01T19:21:14.385Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com 200
[debug] [2023-11-01T19:21:14.385Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lovelace-kendama-full-app/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-01T19:21:14.386Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig [none]
[debug] [2023-11-01T19:21:14.620Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig 200
[debug] [2023-11-01T19:21:14.620Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/adminSdkConfig {"projectId":"lovelace-kendama-full-app","storageBucket":"lovelace-kendama-full-app.appspot.com"}
[debug] [2023-11-01T19:21:14.621Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs [none]
[debug] [2023-11-01T19:21:14.997Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs 200
[debug] [2023-11-01T19:21:14.998Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lovelace-kendama-full-app/configs {}
[debug] [2023-11-01T19:21:14.999Z] Validating nodejs source
[debug] [2023-11-01T19:21:15.597Z] > [functions] package.json contents: {
  "name": "llk",
  "version": "0.1.0",
  "private": true,
  "main": "function.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "deploy": "yarn build && cross-env NODE_ENV=production firebase deploy --only functions,hosting"
  },
  "dependencies": {
    "cross-env": "^7.0.3",
    "firebase-admin": "^11.11.0",
    "firebase-functions": "^4.4.1",
    "mongodb": "^6.2.0",
    "next": "14.0.1",
    "react": "^18",
    "react-dom": "^18"
  }
}
[debug] [2023-11-01T19:21:15.598Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-11-01T19:21:15.599Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-11-01T19:21:15.608Z] Found firebase-functions binary at '/Users/tay/Desktop/code/llk/node_modules/.bin/firebase-functions'
[info] Serving at port 8643

[debug] [2023-11-01T19:21:15.875Z] Got response code 400; body Failed to generate manifest from function source: TypeError: next is not a function
[info] shutdown requested via /__/quitquitquit

[error] 
[error] Error: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error
